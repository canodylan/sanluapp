<div class="dashboard-shell">
  <header class="shell-header">
    <a class="logo" routerLink="/main">SANLUAPP</a>
    <div class="header-actions">
      <button mat-icon-button class="theme-btn" (click)="toggleTheme()" [attr.aria-label]="isDarkTheme ? 'Cambiar a tema claro' : 'Cambiar a tema oscuro'">
        <mat-icon>{{ isDarkTheme ? 'light_mode' : 'dark_mode' }}</mat-icon>
      </button>
      <div class="user-pill">
        <div class="avatar">{{ userInitials }}</div>
        <div class="user-info">
          <span class="user-name">{{ user?.nickname || user?.username || 'Usuario' }}</span>
          <button mat-stroked-button color="accent" (click)="logout()" [disabled]="isLoggingOut">
            {{ isLoggingOut ? 'Saliendo...' : 'Salir' }}
          </button>
        </div>
      </div>
    </div>
  </header>

  <div class="shell-body">
    <nav class="shell-sidebar">
      <div class="nav-title">Men√∫</div>
      <a *ngFor="let link of navLinks; trackBy: trackByLink"
         class="nav-link"
         [routerLink]="link.route"
         routerLinkActive="active"
         [routerLinkActiveOptions]="{ exact: true }">
        {{ link.label }}
      </a>
    </nav>

    <main class="shell-content">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
